<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1877f2">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@700&display=swap" rel="stylesheet">
<title>صورة التحدي ثابتة</title>
<style>
html, body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    overflow:auto;
    background: linear-gradient(
    to bottom,
    #8E4BD6 50%,
    #3DE9F5 50%
  );
}

.side-text{
position:absolute;
top:50%;
font-size:50px;
font-weight:bold;
color:black;
text-shadow: none;
pointer-events:none;
white-space: nowrap;
transform: translateY(-50%) rotate(50deg); 
}   

/* نص الأولاد على الشمال */
.left-text{
right:20px;  
top:150px;     


transform: translateY(-50%) rotate(90deg); 

}


.right-text{
right:20px;
top:80%;

transform: translateY(-50%) rotate(90deg); 
}


.counter{
    display:inline-block;
    min-width:60px;
    text-align:left;
    font-size:40px;
    font-weight:bold;
    margin-left:15px;
    color:black;
}

/* أزرار */
.button {
    display:inline-block;
    padding:15px 25px;
    margin:5px;
    font-size:20px;
    font-weight:bold;
    border:none;
    border-radius:8px;
    cursor:pointer;
    text-align:center;
}

.red { background:#FF4D4D; color:white; }
.yellow { background:#FFD700; color:black; }

.left-buttons{
position:absolute;
left:3px; 
top:calc(5% + 60px); 
display:flex;
flex-direction: column;
gap:15px;
}

.left-buttons .button {
transform: translateY(-50%) rotate(90deg); 
}

.right-buttons{
position:absolute;
left:3px; 
top:calc(70% + 60px);
display:flex;
flex-direction: column;
gap:15px;
}

.right-buttons .button {
transform: translateY(-50%) rotate(90deg);

} 


/* زر رجوع */
.reset-button{
position:absolute;
top:calc(31% + 150px);
left:10px;
transform: translateY(-50%) rotate(90deg);

padding:5px 13px;              /* حجم مناسب */  
font-size:13px;  
font-weight:bold;  

background:#1877f2;             /* أزرق احترافي */  
color:white;                    /* النص أبيض */  

border:none;  
border-left:5px solid #0d5ed7;  /* حافة جانبية */  
border-right:5px solid #0d5ed7; /* حافة جانبية */  

border-radius:5px;              /* حواف ناعمة */  
cursor:pointer;  
z-index:10;  

transition:0.3s;

}

img{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    object-fit:cover;
    transition: transform 0.3s ease;
}
</style>
</head>
<body>
<button id="installBtn" style="
position:absolute;
bottom:20px;
left:50%;
transform:translateX(-50%);
padding:12px 25px;
font-size:16px;
font-weight:bold;
background:#28a745;
color:white;
border:none;
border-radius:8px;
cursor:pointer;
display:none;
z-index:20;
">
نزّل التطبيق
</button>
<!-- زر الرجوع -->
<button class="reset-button" onclick="resetScores()">رجوع</button>  

<!-- الصورة -->
<img src="bj.jpg" alt="challenge">

<!-- نص الأولاد -->
<div class="side-text left-text">  
  أولاد <span class="counter" id="boysCounter">0</span>  
</div>  

<!-- نص البنات -->
<div class="side-text right-text">  
  بنات <span class="counter" id="girlsCounter">0</span>  
</div>  

<!-- أزرار الأولاد -->
<div class="left-buttons">  
  <button class="button red" onclick="addScore('boys',1); moveImage('down',1);">+1</button>  
  <button class="button red" onclick="addScore('boys',5); moveImage('down',5);">+5</button>  
</div>  

<!-- أزرار البنات -->
<div class="right-buttons">  
  <button class="button yellow" onclick="addScore('girls',1); moveImage('up',1);">+1</button>  
  <button class="button yellow" onclick="addScore('girls',5); moveImage('up',5);">+5</button>  
</div>
<audio id="clickSound" src="click.m4a"></audio>
<script>
let boysScore = 0;
let girlsScore = 0;
let imageOffsetY = 0;
const maxUp = -340;
const maxDown = 300;

function addScore(team, value){
    // تشغيل صوت الضغط
    document.getElementById('clickSound').currentTime = 0; // يبدأ من أول الملف
    document.getElementById('clickSound').play();

    if(team === 'boys'){
        boysScore += value;
        document.getElementById('boysCounter').innerText = boysScore;
    } else if(team === 'girls'){
        girlsScore += value;
        document.getElementById('girlsCounter').innerText = girlsScore;
    }
}

function resetScores(){
    boysScore = 0;
    girlsScore = 0;
    document.getElementById('boysCounter').innerText = 0;
    document.getElementById('girlsCounter').innerText = 0;

    const img = document.querySelector('img');
    img.style.transition = "transform 1.5s ease";
    imageOffsetY = 0;
    img.style.transform = `translateY(0px)`;
    setTimeout(() => {
        img.style.transition = "transform 0.3s ease";
    }, 1500);
}

function moveImage(direction, value){
    const step = 10;
    if(direction === 'up'){
        imageOffsetY -= step * value;
        if(imageOffsetY < maxUp) imageOffsetY = maxUp;
    } else if(direction === 'down'){
        imageOffsetY += step * value;
        if(imageOffsetY > maxDown) imageOffsetY = maxDown;
    }
    document.querySelector('img').style.transform = `translateY(${imageOffsetY}px)`;
}

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js")
    .then(() => console.log("Service Worker Registered"));
}

let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";
});

installBtn.addEventListener("click", async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === "accepted") {
      console.log("User accepted install");
    }
    deferredPrompt = null;
    installBtn.style.display = "none";
  }
});

</script>

</body>
</html>
